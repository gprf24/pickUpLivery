/* ========= Design Tokens (Dark) ========= */
:root{
  /* surfaces & text */
  --bg:#0b0d10;
  --bg-elev:#0f141a;
  --card:#10151d;
  --text:#e8edf2;
  --muted:#9aa6b2;

  /* brand & states */
  --brand:#5b71ef;
  --brand-2:#c099ff;
  --ok:#1fbf75;
  --warn:#f59e0b;
  --error:#ef4444;

  /* lines & effects */
  --border:#1d2632;
  --glass:rgba(255,255,255,0.05);
  --shadow:0 18px 50px rgba(0,0,0,.45);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* ========= Layout (Sticky Footer via CSS Grid) ========= */
/* .page — 3 строки: header | main | footer. Footer всегда внизу. */
.page{
  min-height:100vh;
  min-height:100dvh; /* современный корректный vh */
  min-height:100svh; /* safe vh на мобилах */
  display:grid;
  grid-template-rows:auto 1fr auto;
}
.container{
  width:100%;
  max-width:1100px;
  margin-inline:auto;
  padding:1rem;
}
.stack>*+*{margin-top:1rem}
.section{margin:1.25rem 0}
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:14px;
  box-shadow:var(--shadow);
  padding:1rem;
}

/* ========= Header / Nav ========= */
.site-header{
  position:sticky; top:0; z-index:10;
  backdrop-filter:saturate(120%) blur(8px);
  background:linear-gradient(180deg, rgba(11,13,16,.75), rgba(11,13,16,.55));
  border-bottom:1px solid var(--border);
}
.header-inner{display:flex;align-items:center;gap:.75rem;justify-content:space-between}
.brand{color:var(--text);text-decoration:none;font-weight:800;letter-spacing:.2px}
.brand:hover{opacity:.95}
.nav{display:flex;align-items:center;gap:.75rem;flex-wrap:wrap}
.nav a{color:var(--text);text-decoration:none;opacity:.9;padding:.35rem .5rem;border-radius:8px}
.nav a:hover{opacity:1;background:rgba(255,255,255,.04)}
.nav a.active{
  position:relative;
  opacity:1;
}
.nav a.active::after{
  content:"";
  position:absolute;
  left:.4rem; right:.4rem; bottom:-6px;
  height:2px; border-radius:2px; background:linear-gradient(90deg,var(--brand),var(--brand-2));
}
.nav-user{opacity:.8}

/* ========= Main & Footer ========= */
.site-main{
  padding-block:1rem; /* вертикальные отступы контента */
}
.site-footer{
  border-top:1px solid var(--border);
  background:var(--bg-elev);
}
.site-footer .container{padding:1rem}

/* ========= Typography ========= */
h1,h2,h3{margin:0 0 .75rem}
.page-title{display:flex;align-items:center;gap:.5rem}
.lead{color:var(--muted)}
.gradient-text {
  background: linear-gradient(90deg, var(--brand), var(--brand-2), var(--ok), var(--brand));
  background-size: 300%;
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  animation: gradient-flow 6s ease infinite;
  font-weight: 800;
}

@keyframes gradient-flow {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* ========= Forms ========= */
.form-card{max-width:520px;margin:2rem auto}
.form-grid{display:grid;gap:1rem}
label.form-label{display:flex;flex-direction:column;gap:.4rem;font-weight:600}
.form-input, select, input[type="date"], input[type="file"]{
  background:#0e131a;color:var(--text);
  border:1px solid var(--border); border-radius:10px;
  padding:.65rem .8rem; outline:none;
}
.form-input:focus, select:focus, input[type="date"]:focus, input[type="file"]:focus{
  border-color:var(--brand);
  box-shadow:0 0 0 3px rgba(91,113,239,.25);
}
.form-actions{display:flex;gap:.5rem;flex-wrap:wrap}

/* ========= Buttons ========= */
.btn{
  display:inline-flex;align-items:center;justify-content:center;gap:.4rem;
  border-radius:10px;padding:.65rem 1rem;border:1px solid transparent;
  cursor:pointer;text-decoration:none;font-weight:700;transition:transform .06s ease, filter .15s ease, background .2s ease, border-color .2s ease;
  will-change:transform;
}
.btn:active{transform:translateY(1px)}
.btn-primary{background:var(--brand);color:#fff}
.btn-primary:hover{filter:brightness(1.06)}
.btn-secondary{background:transparent;color:var(--text);border-color:var(--border)}
.btn-secondary:hover{border-color:var(--brand)}
.btn-ghost{background:transparent;color:var(--text);opacity:.85}
.btn-ghost:hover{opacity:1}

/* ========= Alerts / Badges ========= */
.alert{padding:.8rem 1rem;border-radius:10px;border:1px solid var(--border);background:rgba(255,255,255,.03)}
.alert-ok{background:rgba(31,191,117,.10);border-color:rgba(31,191,117,.5)}
.alert-error{background:rgba(239,68,68,.10);border-color:rgba(239,68,68,.5)}
.alert-warn{background:rgba(245,158,11,.10);border-color:rgba(245,158,11,.5)}
.error-msg{color:#ffd5d5}
.success-msg{color:#bff7de}

.badge{
  display:inline-flex;align-items:center;gap:.35rem;
  padding:.25rem .55rem;border-radius:999px;font-size:.85rem;
  border:1px solid var(--border);color:var(--muted);background:rgba(255,255,255,.02)
}
.badge.ok{color:#9ff3c9;border-color:rgba(31,191,117,.5)}

/* ========= Tables ========= */
.table-wrap{overflow:auto;border:1px solid var(--border);border-radius:12px}
table{width:100%;border-collapse:separate;border-spacing:0;min-width:760px;background:var(--bg-elev)}
thead th{
  position:sticky;top:0;background:#0f141c;z-index:1;
  text-align:left;padding:.75rem;border-bottom:1px solid var(--border);font-weight:700
}
tbody td{padding:.7rem .8rem;border-bottom:1px solid var(--border)}
tbody tr:nth-child(odd){background:rgba(255,255,255,.02)}
tbody tr:hover{background:rgba(91,113,239,.08)}

/* ========= Details / summary (filters) ========= */
details.filters{margin:.5rem 0 1rem}
details.filters summary{cursor:pointer;font-weight:800;margin-bottom:.6rem}

/* ========= Grid helpers ========= */
.grid{display:grid;gap:1rem}
.grid.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
.grid.cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
@media (max-width:720px){
  .grid.cols-2,.grid.cols-3{grid-template-columns:1fr}
}

/* ========= Media / Previews ========= */
.image-preview{
  display:none;max-width:240px;border:1px dashed var(--border);
  border-radius:10px;padding:.25rem;background:#0e131a
}
.image-preview.show{display:block}

/* dedicated grid for pickup previews */
.image-previews-grid{
  display:grid;grid-template-columns:repeat(4,minmax(80px,1fr));
  gap:8px;margin:10px 0 6px 0
}
.image-previews-grid img{
  width:100%;height:100%;max-height:120px;object-fit:cover;
  border-radius:10px;border:1px solid var(--border)
}
@media (max-width:640px){ .image-previews-grid{grid-template-columns:repeat(2,1fr)} }

/* ========= Utilities ========= */
.muted{color:var(--muted)}
.center{display:grid;place-items:center}
.hr{height:1px;background:var(--border);border:0;margin:.75rem 0;opacity:.9}
.text-error{color:#ffb5b5}
.text-warn{color:#ffd58e}

/* ========= Page patterns ========= */
.page-hero{
  padding:1.25rem 1rem;border-radius:14px;background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.02));
  border:1px solid var(--border);box-shadow:var(--shadow)
}
.page-hero h1{font-size:2rem;margin-bottom:.35rem}
.page-hero .lead{margin:0}

/* active nav underline already handled above */
.nav a.active{border-bottom:0;padding-bottom:.35rem}
